<!DOCTYPE html>
<html>
<head>
    <title> Wildfires, Population Pressure and Imperiled Vegetation in California</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
    <script src="https://unpkg.com/esri-leaflet@3.0.10/dist/esri-leaflet.js"></script>
    <script src="https://unpkg.com/esri-leaflet-vector@4.1.0/dist/esri-leaflet-vector.js" crossorigin=""></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            font-family: Georgia, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f2f2f2;
        }

        p{ 
            margin: 20px;

        }

            #container {
            margin: 20px;
        }
        
        #header {
            background-color: #333;
            color: #fff;
            text-align: center;
            padding: 1em;
        }
        
        #map {
            height: 500px;
            width: 90%;
        }

        #map-container {
            width: 90%;
            margin: 0 auto;
        }

        #images {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
        }

        .image {
            width: 250px;
            height: auto;
            margin: 0 5px;
        }
        
        #buttons {
            text-align: center;
            margin-top: 10px;
        }
        
        button {
            padding: 8px 16px;
            background-color: #333;
            color: #fff;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #555;
        }
    </style>
</head>
<body onload="initialize()">
    <div id= "container">
    <div id="header">
        <h1> Wildfires, Population Pressure and Imperiled Vegetation in California </h1>
    </div>
    <div id="images">
        <img class="image" src="image1.jpg" alt="Image 1">
        <img class="image" src="image2.jpg" alt="Image 2">
        <img class="image" src="image3.jpg" alt="Image 3">
     </div>
    <p><strong><u> Introduction </u></strong></p>
    <p> California’s vegetation is in danger. According to Kathleen Wong at the UC Natural Reserve System, California’s plant biodiversity is primarily threatened by human population growth and natural disasters, like wildfires, intensified by climate change. As of now, California is the most biodiverse state with over 6,500 plant species. This biodiversity is driven by the large variety of landscapes including deserts, conifer forests, salt marshes and alpine tundras. However, it is unlikely such biodiversity will remain as more of California becomes urbanized and wildfires worsen. </p>

    <p> Since 1900 California has lost 90 percent of its  wetlands, 99 percent of its riparian areas, and most of its native grasslands. This degradation is a direct result of residential and industrial development. Just last year, housing growth increased by 0.85% as people moved from cities into the suburbs. Imagine the loss in plant habitat. Furthermore, the strength, size, and frequency of wildfires are increasing. The largest wildfires in California history have occurred in the last two decades. Experts estimate that recent wildfires are five times bigger than those in 1971. This number will only increase with extended drought and higher temperatures. </p> 

    <p> Now that you understand the severity of California’s loss in plant biodiversity, engage with the map below. The goal of this map is to visualize the effects that wildfires and population growth have on vascular plant species. </p>

    <div id= "map-container">
    <div id="map"></div>
    </div>
    <div id="buttons">
        <button id="toggleFire">Toggle the Wildfire Layer</button>
    </div>

    <p> <strong><u> MAP Explanation </u></strong> </p>

    <p> The map above has three layers </p>
            
    <p> 1. The first layer, the default layer, is a layer of imperiled vascular plant species in 2022. This layer displays numbers of vascular plants that are protected by the Endangered Species Act and/or considered to be in danger of extinction. Orange areas are locations with a high density of imperiled species whereas purple areas are locations with a low density of imperiled species. </p>

    <p> 2. The population pressure layer expresses aggregate population growth over the last five years on a green (growth) to purple (decrease) scale. This layer represents areas of high population density and urbanization. </p>

    <p> 3. The final toggle layer shows California wildfires between 2018-2022. Each polygon displays an individual fire and is denoted with a name and year. </p>

    <p> This map visualizes the impacts of population growth and wildfires on endangered plant species. Clearly, urban areas are the biggest cause of the loss in plant biodiversity; areas with high population growth are the same areas with high imperiled plant species. Other areas with a high density of endangered plant species are generally within or around fire boundaries. While these impacts are evident, future maps should explain additional factors that contribute to an increase in endangered species including agriculture and logging. </p>

    <div id= "images"> 
        <img class="image" src="image4.jpg" alt="Image 4">
        <img class="image" src="image5.jpg" alt="Image 5">
        <img class="image" src="image7.jpg" alt="Image 7">
    </div>
        
    <p> <strong><u> Bibliography </u></strong> </p>
    <p> https://www.nytimes.com/2023/04/17/us/california-biodiversity-conservation.html </p>
    <p> https://www.nrdc.org/bio/irene-gutierrez/californias-role-fighting-global-biodiversity-crisis </p>
    <p> https://www.scientificamerican.com/article/climate-change-has-made-californias-wildfires-five-times-bigger/#:~:text=Climate%20Change%20Has%20Made%20California's%20Wildfires%20Five%20Times%20Bigger,-New%20research%20finds&text=CLIMATEWIRE%20%7C%20The%20amount%20of%20land,is%20almost%20entirely%20to%20blame. </p>
    <p> https://ucnrs.org/sheltering-californias-most-vulnerable-plants/ </p>
    <p> https://wildlife.ca.gov/Conservation/Plants/Info </p>
    <p> https://www.nps.gov/prsf/learn/nature/rare-and-endangered-plants.htm </p>
    <p> https://www.nps.gov/pore/learn/nature/endangered_plants.htm </p>
    <p> https://wildlife.ca.gov/Conservation/Plants/Endangered </p>

    </div>

    <script>
        function initialize() {
            var fireVisible = true;
            const apiKey = "AAPK5c56055b0da1494abff6de6f7d7455c8zhvX__FodLqdRT-HFqoHfFXoa6-FTvBdD5zX_UQ85CR-RXVk0mOieuNm0Bv-oV6O";
            const map = L.map("map").setView([37.487118, -119.967690], 6);


            L.esri.Vector.vectorBasemapLayer("osm/standard-relief", {
                apikey: apiKey
            }).addTo(map);

            vegLayer= L.esri.imageMapLayer({
                url: "https://landscape12.arcgis.com/arcgis/rest/services/USA_CONUS_imperiled_species_richness_Plants/ImageServer",
                apiKey: apiKey,
                opacity: 0.8, 
                useCors: false
            }).addTo(map);

            fireLayer = L.esri.featureLayer({
                url: "https://services1.arcgis.com/jUJYIo9tSA7EHvfZ/ArcGIS/rest/services/California_Fire_Perimeters_last_5_years_View/FeatureServer/0",
                apiKey: apiKey,
                opacity: 0.8, 
                useCors: false,
                color: "red", 
                  onEachFeature: function(feature, layer) {
                   layer.bindPopup("<b> Fire: " + feature.properties.FIRE_NAME + "</b><br> Year: " + feature.properties.YEAR_);
                 }
            }).addTo(map);
            
            popLayer = L.esri.tiledMapLayer({
                url: "https://tiles.arcgis.com/tiles/4yjifSiIG17X0gW4/arcgis/rest/services/Population_Pressure_2015/MapServer",
                apiKey: apiKey,
                opacity: 0.8, 
                useCors: false
            });

        

         var overlayMaps = { 
            "Imperiled Vegetation Density in 2022": vegLayer,
            "Population Growth Rate in The Last Five Years": popLayer};
        
         var layerControl = L.control.layers(overlayMaps).addTo(map);

          $("#toggleFire").click(function () {
          if (fireVisible) {
            fireVisible = false;
            fireLayer.removeFrom(map);
          } else { fireVisible= true; 
                  fireLayer.addTo(map);
          }
        });
      }
    </script>
</body>
</html>

